# 一、能力单元的定义

## 1.能力单元是什么

能力单元是一组由创作者(奇匠)在编辑时预定义好的一组能力数据，它可以在运行时被*节点图*、*命中检测组件*、*本地投射物*等多个其他的功能模块调用

包括以下类型：

|  |  |
| --- | --- |
| **类型** | **说明** |
| 攻击盒攻击 | 以指定目标或位置为基准，发起一次攻击盒攻击。攻击盒碰撞到实体的*受击盒*时，会对实体发起一次攻击 |
| 直接攻击 | 对指定目标发起一次直接攻击 |
| 播放特效 | 以指定目标或位置为基准，播放*限时特效* |
| 创建本地投射物 | 以指定目标或位置为基准，创生一个*本地投射物* |
| 添加单位状态 | 对指定目标添加*单位状态* |
| 移除单位状态 | 从指定目标上移除*单位状态* |
| 销毁自身 | *销毁*自身 |
| 恢复生命 | 为目标恢复一定的生命 |

## 2.如何使用能力单元

能力单元是一组纯数据，本身不具备任何功能。因此需要其他系统来调用能力单元实现对应的效果

当前模式中共有以下的几个能力单元调用入口。需要注意的是，每个调用入口可用的能力单元类型是不同的

|  |  |  |
| --- | --- | --- |
| **调用类型** | **说明** | **可用能力单元类型** |
| 服务端节点图直接调用 | 从*服务端节点图*直接发起一次能力单元调用，仅可使用攻击相关能力单元 | 【攻击盒攻击】  【直接攻击】  【恢复生命】 |
| 命中检测组件的命中时事件调用 | [命中检测](/ys/ugc/tutorial//detail/mh2pir0hat1s)在命中实体或场景时，可以发起一次能力单元调用 | 【攻击盒攻击】  【直接攻击】  【恢复生命】 |
| 本地投射物的命中时事件调用 | [本地投射物](/ys/ugc/tutorial//detail/mhciimiw86jg)在命中实体或场景时，可以发起一次能力单元调用 | 【攻击盒攻击】  【直接攻击】  【播放特效】  【创生投射物】  【添加单位状态】  【移除单位状态】  【销毁自身】  【恢复生命】 |
| 本地投射物的销毁时事件调用 | [本地投射物](/ys/ugc/tutorial//detail/mhciimiw86jg)被销毁时，可以发起一次能力单元调用 | 【攻击盒攻击】  【直接攻击】  【播放特效】  【创生投射物】 |

# 二、能力单元的相关编辑

## 1.能力单元的编辑入口

### (1)特化配置页签编辑入口

![]()

可点击详细编辑进入详情界面

### (2)本地投射物页签编辑入口

![]()

可点击详细编辑进入详情界面

## 2.能力单元的编辑

![]()

在能力单元详情编辑页面，点击+号，可以新增一个能力单元配置

![]()

之后可以在能力单元类型选项中，切换配置的能力单元类型

## 3.能力单元的效果

见[能力单元效果](/ys/ugc/tutorial//detail/mhrvqvioautg)

## 4.能力单元的调用

### (1)服务端节点图节点调用

服务端节点图中可以调用【攻击盒攻击】、【直接攻击】和【恢复生命】这三个能力单元

【攻击盒攻击】和【直接攻击】使用【发起攻击】节点进行调用

![]()

【恢复生命】使用【恢复生命】节点进行调用

![]()

### (2)命中检测组件命中时调用

命中检测组件中可以配置【命中时触发】的能力单元

![]()

点击详情进入命中检测组件详情设置界面

![]()

点击添加能力单元即可添加预先配置好的能力单元

![]()

当命中检测成功触发后，会立刻调用一次配置的能力单元

与在服务端节点图中使用【命中检测触发时】事件来处理同样的逻辑相比，在【命中触发设置】中配置可以在本地更快的触发能力单元的效果，减少网络波动的影响

### (3)本地投射物命中时调用

在本地投射物的【命中检测】组件中，同样可以配置【命中时触发】的能力单元。由于本地投射物没有节点图相关配置，本地投射物的多数逻辑需要通过命中时触发逻辑来编写

![]()

![]()

如下图所示，是一个常见的本地投射物命中后、特效播放、最后销毁自身的能力单元配置

![]()

顺次配置：直接攻击——特效播放——销毁自身的三个能力单元

然后在命中触发设置中进行配置，即可实现本地投射物在命中后造成伤害、播放特效，最后使自身消失

![]()

### (4)本地投射物销毁时调用

在本地投射物的基础属性页面的【生命周期结束时行为设置】中，也可以引用一组能力单元

通常用于本地投射物在销毁时执行的一些行为，例如：销毁时发起一次攻击

![]()