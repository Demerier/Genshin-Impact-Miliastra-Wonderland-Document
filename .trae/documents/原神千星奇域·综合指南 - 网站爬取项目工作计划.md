# 原神千星奇域·综合指南 - 网站爬取项目工作计划

## 1. 项目概述

### 1.1 项目目标
- 爬取原神千星奇域·综合指南网站的所有167个文档页面
- 转换为Markdown格式便于阅读和管理
- 本地化所有链接和图片资源
- 对超过500,000字符的极长内容进行分段处理

### 1.2 目标网站
- 网站地址：https://act.mihoyo.com/ys/ugc/tutorial/detail/mh29wpicgvh0
- 内容类型：游戏创作工具的综合指南文档
- 页面数量：167个文档页面

## 2. 项目阶段划分与进度计划

| 阶段 | 名称 | 主要任务 | 交付物 |
|------|------|----------|--------|
| Phase 1 | 环境搭建与准备 | 安装依赖、配置日志系统、初始数据采集 | 环境配置文档、待爬取URL列表、文档ID映射表 |
| Phase 2 | 爬取功能开发 | 开发单页面爬取功能、批量爬取功能、链接与图片处理功能 | 爬虫代码、测试报告 |
| Phase 3 | 全面爬取执行 | 爬取所有文档页面，生成Markdown文件 | 167个Markdown文档、爬取日志 |
| Phase 4 | 极长内容处理 | 识别极长内容、分段处理、生成目录文件、更新链接关系 | 分段后的Markdown文件、目录文件、更新后的链接关系 |
| Phase 5 | 质量检查与修复 | AI全面自检、人工抽样审阅、问题修复 | 自检报告、审阅意见表、修复后的文档 |
| Phase 6 | 验收与交付 | 最终质量检查、项目成果交付、项目总结报告 | 完整的Markdown文档集合、项目总结报告 |

## 3. 详细任务分配与时间节点

### 3.1 Phase 1: 环境搭建与准备 (Day 1-2)

| 任务ID | 任务名称 | 负责人 | 时间节点 | 交付物 | 验收标准 |
|--------|----------|--------|----------|--------|----------|
| P1-T1 | 安装依赖 | AI智能体 | Day 1 | 依赖安装记录 | 所有依赖安装成功，无错误 |
| P1-T2 | 配置日志系统 | AI智能体 | Day 1 | 日志配置文件 | 日志系统正常工作，能记录爬取过程和异常信息 |
| P1-T3 | 初始数据采集 | AI智能体 | Day 2 | 待爬取URL列表、文档ID映射表 | 成功提取所有167个文档URL，建立完整的文档ID与中文标题映射表 |
| P1-T4 | 测试爬取 | AI智能体 | Day 2 | 测试爬取结果 | 成功爬取5个测试页面，转换为Markdown格式，格式正确 |

### 3.2 Phase 2: 爬取功能开发 (Day 3-4)

| 任务ID | 任务名称 | 负责人 | 时间节点 | 交付物 | 验收标准 |
|--------|----------|--------|----------|--------|----------|
| P2-T1 | 单页面爬取功能开发 | AI智能体 | Day 3 | 单页面爬取代码 | 能成功爬取单个页面，提取内容、链接和图片 |
| P2-T2 | 批量爬取功能开发 | AI智能体 | Day 3 | 批量爬取代码 | 支持并发爬取，最大并发数5，支持断点续爬 |
| P2-T3 | 链接与图片处理功能开发 | AI智能体 | Day 4 | 链接与图片处理代码 | 能将绝对URL转换为相对路径，下载并本地化图片资源 |
| P2-T4 | 测试用例编写 | AI智能体 | Day 4 | 测试用例 | 覆盖主要功能，测试通过率100% |

### 3.3 Phase 3: 全面爬取执行 (Day 5-7)

| 任务ID | 任务名称 | 负责人 | 时间节点 | 交付物 | 验收标准 |
|--------|----------|--------|----------|--------|----------|
| P3-T1 | 爬取第1-50个文档 | AI智能体 | Day 5 | 50个Markdown文档 | 内容完整，格式规范 |
| P3-T2 | 爬取第51-100个文档 | AI智能体 | Day 6 | 50个Markdown文档 | 内容完整，格式规范 |
| P3-T3 | 爬取第101-167个文档 | AI智能体 | Day 7 | 67个Markdown文档 | 内容完整，格式规范 |
| P3-T4 | 每日进度报告 | AI智能体 | 每天结束 | 进度报告 | 包含当日爬取数量、成功/失败情况 |
| P3-T5 | 爬取结果初步检查 | AI智能体 | Day 7 | 自检报告 | 确认所有文档已爬取，无明显错误 |

### 3.4 Phase 4: 极长内容处理 (Day 8-9)

| 任务ID | 任务名称 | 负责人 | 时间节点 | 交付物 | 验收标准 |
|--------|----------|--------|----------|--------|----------|
| P4-T1 | 识别极长内容文档 | AI智能体 | Day 8 | 极长内容列表 | 准确识别所有超过500,000字符的文档 |
| P4-T2 | 极长内容分段处理 | AI智能体 | Day 8-9 | 分段后的Markdown文件 | 分段合理，每个分段文件内容完整 |
| P4-T3 | 生成目录文件 | AI智能体 | Day 9 | 目录文件 | 目录结构清晰，包含所有分段的链接 |
| P4-T4 | 更新链接关系 | AI智能体 | Day 9 | 更新后的链接关系 | 所有链接指向正确，包含"上一章"、"下一章"导航链接 |
| P4-T5 | 分段结果自检 | AI智能体 | Day 9 | 自检报告 | 确认分段完整，链接有效 |

### 3.5 Phase 5: 质量检查与修复 (Day 10-11)

| 任务ID | 任务名称 | 负责人 | 时间节点 | 交付物 | 验收标准 |
|--------|----------|--------|----------|--------|----------|
| P5-T1 | AI全面自检 | AI智能体 | Day 10 | 自检报告 | 所有文档通过AI质量检查 |
| P5-T2 | 人工抽样审阅 | 人工审阅者 | Day 10-11 | 审阅意见表 | 抽样文档质量符合要求，问题数量在可接受范围内 |
| P5-T3 | 问题修复 | AI智能体 | Day 11 | 修复后的文档 | 所有问题已修复，符合质量标准 |
| P5-T4 | 修复结果验证 | AI智能体 | Day 11 | 验证报告 | 确认问题已彻底修复 |

### 3.6 Phase 6: 验收与交付 (Day 12)

| 任务ID | 任务名称 | 负责人 | 时间节点 | 交付物 | 验收标准 |
|--------|----------|--------|----------|--------|----------|
| P6-T1 | 最终质量检查 | AI智能体 | Day 12 | 最终自检报告 | 所有文档通过最终检查，质量评分达到优秀（90分以上） |
| P6-T2 | 项目成果交付 | AI智能体 | Day 12 | 完整的Markdown文档集合 | 包含所有167个文档的最终版本，格式规范，链接有效 |
| P6-T3 | 项目总结报告 | AI智能体 | Day 12 | 项目总结报告 | 包含项目执行情况、成果统计、经验教训 |
| P6-T4 | 项目验收 | 人工审阅者 | Day 12 | 验收报告 | 确认项目成功完成，符合所有要求 |

## 4. 质量控制措施

### 4.1 质量标准

| 质量维度 | 标准 | 权重 |
|----------|------|------|
| 内容完整性 | 文档内容完整，无缺失或截断 | 30% |
| 内容准确性 | 内容与原始页面一致，无错误或扭曲 | 25% |
| 可读性 | 内容易读，段落清晰，格式规范 | 20% |
| 结构性 | 保持原始页面的标题层级和段落结构 | 15% |
| 关联性 | 内容逻辑连贯，主题明确 | 10% |

### 4.2 自检流程

1. **单文件自检**：每个文件生成后立即执行，检查内容完整性、准确性、格式规范性、链接有效性、文件名规范性
2. **批量自检**：每天结束时执行，统计自检结果，生成批量自检报告，标记需人工审阅的文件
3. **分段文档自检**：分段处理完成后立即执行，检查分段完整性、合理性、目录文件完整性、链接正确性
4. **最终自检**：项目交付前执行，对所有文档进行全面检查

### 4.3 人工抽查

- 内容准确性：抽查5%的文档，比对原始HTML与转换后的Markdown
- 分段合理性：抽查10%的分段文档，检查分段边界和内容关联性
- 可读性：抽查3%的文档，人工阅读，评估阅读体验

## 5. 沟通机制

### 5.1 沟通渠道
- **进度报告**：AI智能体每日自动生成，存储在项目目录中
- **审阅反馈**：人工审阅者通过审阅意见表提供反馈
- **异常通知**：AI智能体通过特殊标记的报告通知人工审阅者

### 5.2 沟通频率
- **每日进度报告**：每天1次
- **人工审阅反馈**：每次审阅后立即反馈
- **异常通知**：实时通知

## 6. 风险评估与应对

| 风险类型 | 风险描述 | 发生概率 | 影响程度 | 应对措施 |
|----------|----------|----------|----------|----------|
| 网络问题 | 网络不稳定导致爬取失败 | 中 | 中 | 增加重试机制，设置合理的爬取间隔，记录失败URL，支持断点续爬 |
| 反爬机制 | 网站增加反爬措施 | 低 | 高 | 使用真实浏览器User-Agent，合理设置爬取间隔，保持会话一致性，考虑使用代理IP池 |
| 极长内容处理 | 极长内容分段不准确 | 中 | 中 | 优化分段算法，基于标题层级进行分段，增加人工抽查 |
| 内容质量问题 | 爬取的内容格式不规范 | 中 | 中 | 加强AI自检，增加人工抽样检查，优化内容提取规则 |
| 进度延误 | 爬取进度落后于计划 | 低 | 中 | 调整爬取策略，增加并发数，优化代码性能 |

## 7. 交付物清单

| 交付物名称 | 格式 | 数量 | 交付时间 | 负责人 |
|------------|------|------|----------|--------|
| 待爬取URL列表 | 文本 | 1份 | Day 2 | AI智能体 |
| 文档ID映射表 | JSON | 1份 | Day 2 | AI智能体 |
| 测试爬取结果 | Markdown | 5个 | Day 2 | AI智能体 |
| 完整Markdown文档集合 | Markdown | 167个+ | Day 7 | AI智能体 |
| 极长内容分段文档 | Markdown | 视情况而定 | Day 9 | AI智能体 |
| 目录文件 | Markdown | 视情况而定 | Day 9 | AI智能体 |
| 自检报告 | Markdown | 6份 | 各阶段结束 | AI智能体 |
| 审阅意见表 | Markdown | 视情况而定 | 每次审阅后 | 人工审阅者 |
| 进度报告 | Markdown | 11份 | 每天结束 | AI智能体 |
| 项目总结报告 | Markdown | 1份 | Day 12 | AI智能体 |
| 验收报告 | Markdown | 1份 | Day 12 | 人工审阅者 |

## 8. 技术规范与最佳实践

### 8.1 代码规范

- 遵循PEP 8代码规范
- 使用小写字母和下划线（snake_case）命名文件和变量
- 编写详细的文档和注释
- 确保测试覆盖率
- 定期更新依赖

### 8.2 提交规范

- 采用Conventional Commits规范
- 提交信息格式：`<类型>(可选的范围): <描述>`
- 每个提交只包含一个逻辑变更
- 提交信息清晰、准确、完整

### 8.3 分支管理

- 所有功能开发必须在独立的feature分支上进行
- 分支命名格式：`feature/功能描述`
- 分支必须从`develop`分支创建
- 功能开发完成后，向`develop`分支创建Pull Request

### 8.4 版本控制

- 采用语义化版本控制规范
- 版本号格式：`vX.Y.Z`
- 定期发布版本，保持版本号的递增
- 详细记录每个版本的变更内容

## 9. 附录

### 9.1 术语定义

| 术语 | 定义 |
|------|------|
| AI智能体 | 执行爬取任务的自动化程序 |
| 人工审阅者 | 负责质量检查的人类人员 |
| 极长内容 | 超过500,000字符的单页文档 |
| 分段处理 | 将极长内容分割为多个小文件的过程 |
| 自检报告 | AI智能体自动生成的质量检查报告 |
| 审阅意见表 | 人工审阅者填写的质量反馈表 |

### 9.2 参考文件

- 《项目进度管理计划.md》
- 《CODE_REVIEW_GUIDELINES.md》
- 《COMMIT_GUIDELINES.md》
- 《VERSIONING_GUIDELINES.md》
- 《成果物自检规范.md》
- 《网站爬取执行计划.md》

### 9.3 工具清单

| 工具名称 | 用途 | 版本 |
|----------|------|------|
| Python | 编程语言 | 3.8+ |
| requests | HTTP请求库 | 2.25+ |
| beautifulsoup4 | HTML解析库 | 4.9+ |
| markdownify | HTML转Markdown库 | 最新版本 |
| pytest | 测试框架 | 最新版本 |
| Markdownlint | Markdown格式检查工具 | 最新版本 |