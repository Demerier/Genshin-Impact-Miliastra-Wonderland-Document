# 原神千星奇域·综合指南 - 成果物自检规范

## 1. 引言

### 1.1 目的
本规范旨在设定AI生成内容的质量标准与检查流程，确保爬取的Markdown文档符合预期的质量要求，同时为AI智能体提供明确的自检指导。

### 1.2 适用范围
本规范适用于原神千星奇域·综合指南网站爬取项目中生成的所有成果物，包括：
- 常规Markdown文档
- 分段处理后的Markdown文档
- 目录文件
- 自检报告
- 进度报告

## 2. 质量标准

### 2.1 内容质量

| 质量维度 | 标准 | 检查方法 | 权重 |
|----------|------|----------|------|
| 完整性 | 文档内容完整，无缺失或截断 | 比对原始HTML内容长度与转换后的Markdown内容长度 | 30% |
| 准确性 | 内容与原始页面一致，无错误或扭曲 | 抽样比对原始HTML与转换后的Markdown | 25% |
| 可读性 | 内容易读，段落清晰，格式规范 | 自动检查格式规范 + 人工抽查 | 20% |
| 结构性 | 保持原始页面的标题层级和段落结构 | 检查标题标签的使用情况 | 15% |
| 关联性 | 内容逻辑连贯，主题明确 | 检查段落之间的逻辑关系 | 10% |

### 2.2 格式质量

#### 2.2.1 标题格式
- 使用正确的Markdown标题格式（# - ######）
- 标题层级清晰，无跳跃（如从h1直接到h3）
- 标题内容与原始页面一致

#### 2.2.2 段落格式
- 每个段落单独一行，无连续空行
- 段落缩进统一（无缩进）
- 行宽控制在100字符以内（自动换行）

#### 2.2.3 列表格式
- 使用正确的Markdown列表格式（- / 1.）
- 列表项缩进统一（2个空格）
- 列表嵌套层级不超过3级

#### 2.2.4 代码块格式
- 使用 ``` 包裹代码块
- 代码块前有说明文字
- 代码块语言标识正确（如 ```python）

#### 2.2.5 表格格式
- 使用正确的Markdown表格格式
- 表头与内容对齐
- 表格宽度适中，不超过页面宽度

### 2.3 链接质量

#### 2.3.1 内部链接
- 所有内部链接已转换为本地相对路径
- 链接格式正确（[链接文本](./文件名.md)）
- 链接指向的文件存在
- 链接文本与目标文件标题一致

#### 2.3.2 图片链接
- 所有图片已下载到本地images目录
- 图片链接已转换为本地相对路径（![alt](./images/文件名.png)）
- 图片文件存在
- 图片alt属性描述准确

### 2.4 文件名规范

- 使用中文文件名，清晰反映文档内容
- 文件名不含特殊字符（如? * : " < > |）
- 分段文档使用统一的命名规则：`原文件名_一级标题_二级标题.md`
- 目录文件命名：`原文件名 - 目录.md`

## 3. 自检流程

### 3.1 单文件自检流程

```
┌─────────────────────────────────────────────────────┐
│ 1. 内容完整性检查                                 │
├─────────────────────────────────────────────────────┤
│ 2. 内容准确性检查                                 │
├─────────────────────────────────────────────────────┤
│ 3. 格式规范性检查                                 │
├─────────────────────────────────────────────────────┤
│ 4. 链接有效性检查                                 │
├─────────────────────────────────────────────────────┤
│ 5. 文件名规范性检查                               │
├─────────────────────────────────────────────────────┤
│ 6. 质量评分计算                                   │
├─────────────────────────────────────────────────────┤
│ 7. 生成自检报告                                   │
└─────────────────────────────────────────────────────┘
```

### 3.2 批量自检流程

```
┌─────────────────────────────────────────────────────┐
│ 1. 获取待检查文件列表                             │
├─────────────────────────────────────────────────────┤
│ 2. 对每个文件执行单文件自检流程                   │
├─────────────────────────────────────────────────────┤
│ 3. 统计自检结果                                   │
├─────────────────────────────────────────────────────┤
│ 4. 生成批量自检报告                               │
├─────────────────────────────────────────────────────┤
│ 5. 标记需人工审阅的文件                           │
└─────────────────────────────────────────────────────┘
```

### 3.3 分段文档特殊检查

#### 3.3.1 分段完整性检查
- 确保所有原始内容都被正确分段，无遗漏
- 比对分段前后的内容总长度

#### 3.3.2 分段合理性检查
- 检查每段内容是否具有完整的主题
- 检查分段边界是否合理（基于标题层级）

#### 3.3.3 目录文件检查
- 目录文件包含所有分段的链接
- 链接格式正确，指向存在的文件
- 目录结构清晰，便于导航

## 4. 自检工具与方法

### 4.1 自动检查工具

| 检查项 | 工具/方法 | 自动化程度 |
|--------|----------|------------|
| 内容长度比对 | Python脚本 | 100% |
| 格式规范性 | Markdownlint | 100% |
| 链接有效性 | Python脚本 | 100% |
| 文件名规范 | Python脚本 | 100% |
| 标题层级 | Python脚本 | 100% |

### 4.2 人工抽查方法

| 抽查项 | 抽查比例 | 抽查方法 |
|--------|----------|----------|
| 内容准确性 | 5% | 随机抽取文档，比对原始HTML与转换后的Markdown |
| 分段合理性 | 10%（仅对分段文档） | 检查分段边界和内容关联性 |
| 可读性 | 3% | 人工阅读，评估阅读体验 |

## 5. 自检报告规范

### 5.1 报告结构

```
# 自检报告

## 1. 基本信息
- 报告生成时间：YYYY-MM-DD HH:MM:SS
- 检查文件数量：X个
- 检查类型：单文件检查 / 批量检查 / 分段文档检查

## 2. 检查结果统计

| 检查项 | 通过率 | 问题数量 | 严重程度 |
|--------|--------|----------|----------|
| 内容完整性 | XX% | X个 | 严重/中等/轻微 |
| 内容准确性 | XX% | X个 | 严重/中等/轻微 |
| 格式规范性 | XX% | X个 | 严重/中等/轻微 |
| 链接有效性 | XX% | X个 | 严重/中等/轻微 |
| 文件名规范 | XX% | X个 | 严重/中等/轻微 |

## 3. 问题详情

| 文件名称 | 问题类型 | 问题描述 | 严重程度 | 建议修复方案 |
|----------|----------|----------|----------|--------------|
| 文件名.md | 格式问题 | 标题层级跳跃（h1直接到h3） | 中等 | 调整标题层级 |
| 文件名.md | 链接问题 | 链接指向的文件不存在 | 严重 | 修正链接或创建缺失文件 |

## 4. 质量评分
- 平均质量评分：XX分
- 最高分：XX分（文件名.md）
- 最低分：XX分（文件名.md）

## 5. 结论与建议
- 整体质量评价：优秀/良好/合格/不合格
- 建议修复的主要问题：
  1. 修复所有严重级别的链接问题
  2. 调整标题层级，确保格式规范
  3. 优化分段边界，提高分段合理性

## 6. 后续行动
- 是否需要人工审阅：是/否
- 建议审阅比例：X%
- 预计修复时间：X小时
```

### 5.2 质量评分计算

质量评分 = (内容完整性得分 × 30%) + (内容准确性得分 × 25%) + (可读性得分 × 20%) + (结构性得分 × 15%) + (关联性得分 × 10%)

- 每项得分范围：0-100分
- 总分范围：0-100分

### 5.3 评分等级

| 评分范围 | 等级 | 处理建议 |
|----------|------|----------|
| 90-100分 | 优秀 | 直接通过，无需人工审阅 |
| 80-89分 | 良好 | 抽样人工审阅（1%） |
| 70-79分 | 合格 | 抽样人工审阅（5%），修复中等问题 |
| 60-69分 | 不合格 | 全面人工审阅（20%），修复所有问题 |
| <60分 | 严重不合格 | 重新生成，全面人工审阅 |

## 6. 问题分类与优先级

### 6.1 问题分类

| 分类 | 描述 | 示例 |
|------|------|------|
| 内容问题 | 内容缺失、错误或扭曲 | 段落缺失、文字错误 |
| 格式问题 | 格式不规范，不符合Markdown标准 | 标题层级错误、列表格式错误 |
| 链接问题 | 链接无效或格式错误 | 链接指向不存在的文件、链接格式错误 |
| 文件名问题 | 文件名不规范或不符合命名规则 | 文件名包含特殊字符、命名不清晰 |
| 结构问题 | 文档结构不合理或不符合要求 | 标题缺失、段落混乱 |

### 6.2 优先级划分

| 优先级 | 严重程度 | 影响 | 修复时限 |
|--------|----------|------|----------|
| P0 | 严重 | 影响文档可读性或内容完整性 | 立即修复 |
| P1 | 中等 | 影响格式规范或链接有效性 | 24小时内修复 |
| P2 | 轻微 | 影响细节格式或文件名规范 | 48小时内修复 |

## 7. 自检执行要求

### 7.1 执行频率

| 检查类型 | 执行频率 | 负责人 |
|----------|----------|--------|
| 单文件自检 | 每个文件生成后立即执行 | AI智能体 |
| 批量自检 | 每天结束时执行 | AI智能体 |
| 分段文档自检 | 分段处理完成后立即执行 | AI智能体 |
| 最终自检 | 项目交付前执行 | AI智能体 |

### 7.2 执行记录

- 所有自检结果必须生成自检报告
- 自检报告必须存储在项目目录中
- 自检报告命名规则：`自检报告_YYYY-MM-DD_HH-MM-SS.md`
- 报告保存期限：项目结束后3个月

## 8. 质量改进机制

### 8.1 问题分析

- 定期分析自检报告中的问题模式
- 识别常见问题和高发问题
- 分析问题产生的原因

### 8.2 改进措施

- 根据问题分析结果，优化内容提取规则
- 改进转换算法，减少格式问题
- 调整分段策略，提高分段合理性
- 更新自检工具，增强检查能力

### 8.3 改进效果评估

- 跟踪改进后的问题发生率
- 比较改进前后的质量评分
- 定期更新质量标准和自检流程

## 9. 附录

### 9.1 工具清单

| 工具名称 | 用途 | 版本 |
|----------|------|------|
| Markdownlint | 检查Markdown格式规范 | 最新版本 |
| Python | 编写自检脚本 | 3.8+ |
| BeautifulSoup | HTML解析 | 4.9+ |
| requests | HTTP请求 | 2.25+ |

### 9.2 参考文档

- 《网站爬取执行计划.md》
- 《项目进度管理计划.md》
- 《Markdown语法指南》

### 9.3 版本控制

| 版本 | 更新日期 | 更新内容 | 更新人 |
|------|----------|----------|--------|
| V1.0 | 2026-01-03 | 初始版本 | AI智能体 |
| V1.1 | 2026-01-04 | 优化质量评分计算方法 | AI智能体 |
| V1.2 | 2026-01-05 | 增加分段文档特殊检查规则 | 人工审阅者 |